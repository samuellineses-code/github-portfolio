<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Samuel Lineses Portfolio</title>
  <style>
    body { 
        font-family: Arial, sans-serif;
        background: linear-gradient(135deg,#06b6d4,#8b5cf6);
        margin:0; color:#111 
    }
    header{
        background:rgba(0,0,0,0.6);
        color:white; 
        padding:12px; 
        text-align:center
    }
    nav{
        background:rgba(0,0,0,0.55); 
        text-align:center; 
        padding:8px
    }
    nav button{
        margin:6px; 
        padding:8px 12px; 
        border:none; 
        background:white; 
        cursor:pointer
    }
    main{
        max-width:900px; 
        margin:20px auto; 
        padding:10px
    }
    .card{
        background:white; 
        padding:12px; 
        border-radius:6px; 
        box-shadow:0 2px 6px rgba(0,0,0,0.15); 
        margin-bottom:12px
    }
    ul{
        list-style:none; 
        padding:0
    }
    li{
        padding:8px 0; 
        border-bottom:1px solid #eee
    }
    img{
        max-width:150px; 
        display:block; 
        margin-top:6px
    }
    .small{
        font-size:0.9rem; 
    }
    input[type=file]::file-selector-button{
        background:linear-gradient(90deg,#06b6d4,#8b5cf6); 
        border:none; color:white; 
        padding:6px 10px; 
        border-radius:6px; 
        cursor:pointer
    }
  </style>
</head>
<body>
  <header>
    <h1>Samuel Lineses Portfolio</h1>
    <p>202410096 • BSIT-2A</p>
    <p class="small">Quizzes • Seatwork • Exams • Lab Activities</p>
  </header>
  <nav>
    <button onclick="showSection('quizzes')">Quizzes</button>
    <button onclick="showSection('seatwork')">Seatwork</button>
    <button onclick="showSection('exams')">Exams</button>
    <button onclick="showSection('lab')">Lab Activities</button>
  </nav>

  <main id="content"></main>

  <script>
    // simple beginner-friendly app with robust delete using event delegation
    var data = JSON.parse(localStorage.getItem('portfolio-data') || '{}');
    if(!data.quizzes) data.quizzes = [];
    if(!data.seatwork) data.seatwork = [];
    if(!data.exams) data.exams = [];
    if(!data.lab) data.lab = [];

    function saveData(){ localStorage.setItem('portfolio-data', JSON.stringify(data)); }

    function addItem(kind, title, date, img){
      data[kind].push({ id: Date.now(), title: title, date: date, img: img });
      saveData();
      renderList(kind);
    }

    // delete is handled by delegated event listener (below)
    function renderList(kind){
      var items = data[kind];
      var html = '<h2>' + kind.toUpperCase() + '</h2>';

      html += "<div class='card'><form id='form-"+kind+"'>" +
              "<input id='title-"+kind+"' placeholder='Title' required><br><br>" +
              "<input id='date-"+kind+"' placeholder='Date'><br><br>" +
              "<input type='file' id='img-"+kind+"' accept='image/*'><br><br>" +
              "<button type='submit'>Add</button></form></div>";

      html += "<div class='card'><ul>";
      if(items.length === 0){
        html += "<li>No items yet</li>";
      } else {
        for(var i=0;i<items.length;i++){
          var it = items[i];
          html += "<li data-id='"+it.id+"'><strong>"+escapeHtml(it.title)+"</strong> ("+escapeHtml(it.date)+")<br>";
          if(it.img) html += "<img src='"+it.img+"'>";
          // include data-kind so the delegated handler knows which array to change
          html += "<br><button class='delete-btn' data-id='"+it.id+"' data-kind='"+kind+"'>Delete</button></li>";
        }
      }
      html += "</ul></div>";

      document.getElementById('content').innerHTML = html;

      // form handler
      var form = document.getElementById('form-'+kind);
      form.onsubmit = function(e){
        e.preventDefault();
        var title = document.getElementById('title-'+kind).value.trim();
        var date = document.getElementById('date-'+kind).value.trim() || new Date().toISOString().slice(0,10);
        var fileInput = document.getElementById('img-'+kind);
        if(!title) return;
        var file = fileInput.files[0];
        if(file){
          var reader = new FileReader();
          reader.onload = function(){ addItem(kind, title, date, reader.result); };
          reader.readAsDataURL(file);
        } else {
          addItem(kind, title, date, null);
        }
      };
    }

    // delegated click handler: catches clicks on any delete button, even after re-render
    document.getElementById('content').addEventListener('click', function(e){
      var btn = e.target.closest('.delete-btn');
      if(!btn) return;
      var id = Number(btn.getAttribute('data-id'));
      var kind = btn.getAttribute('data-kind');
      if(!kind) return;
      if(!confirm('Delete this item?')) return;
      // ensure numeric comparison
      data[kind] = data[kind].filter(function(x){ return Number(x.id) !== id; });
      saveData();
      renderList(kind);
    });

    function escapeHtml(str){
      return String(str).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,"&#39;");
    }

    function showSection(kind){ renderList(kind); }

    // start on quizzes
    showSection('quizzes');
  </script>
</body>
</html>

